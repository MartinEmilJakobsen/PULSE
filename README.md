# Distributional Robustness of K-class Estimators and the PULSE
Repository for simulations and illustrations for "Distributional Robustness of K-class Estimators and the PULSE" @ https://arxiv.org/abs/2005.03353. This repository also contains all R scripts for conducting the experiments referenced in the paper. In /Data the experiment data used in the paper is present.


## Implementation of K-class estimators and the PULSE

## Replicate experiments and illustrations {.tabset}

Follow the steps in 1) Data generation, 2) Data Analysis and 3) Generate Illustrations, to replicate experiments. 

### 1) Data generation {.tabset}

#### 1.a) Initial Experiments

To generate the experiment data: run the following scripts. Each script saves the data at "Data/SCRIPTNAME_REPLICATIONS_OBSERVATIONS_EXECUTIONTIME.RDS" and saves a copy of the script at "Data/Log/SCRIPTNAME_REPLICATIONS_OBSERVATIONS_EXECUTIONTIME.RDS".

1. **Experiment_Univariate.R**
    * *This script runs the univariate experiment*
2. **Experiment_Multivariate_VaryingConfounding_Beta00_PULSE05.R**
    * *This scripts runs the multivariate experiment with varying confounding for $\beta=(0,0)$. It computes the performance measures for OLS, Fuller(1), Fuller(4) and PULSE with $p_{\min}=0.05$*
3. **Experiment_Multivariate_VaryingConfounding_Beta00_PULSE10.R**
    * *This scripts runs the multivariate experiment with varying confounding for $\beta=(0,0)$. It computes the performance measures for OLS, Fuller(1), Fuller(4) and PULSE with $p_{\min}=0.1$*
4. **Experiment_Multivariate_VaryingConfounding_Beta11_PULSE05.R**
    * *This scripts runs the multivariate experiment with varying confounding for $\beta=(1,1)$. It computes the performance measures for OLS, Fuller(1), Fuller(4) and PULSE with $p_{\min}=0.05$*
4. **Experiment_Multivariate_VaryingConfounding_Beta-11_PULSE05.R**
    * *This scripts runs the multivariate experiment with varying confounding for $\beta=(-1,1)$. It computes the performance measures for OLS, Fuller(1), Fuller(4) and PULSE with $p_{\min}=0.05$*
5. **Experiment_Multivariate_FixedConfounding.R**
    * *This scripts runs the multivariate experiment with fixed confounding for $\beta=(0,0)$. It computes the performance measures for OLS, Fuller(1), Fuller(4) and PULSE with $p_{\min}=0.05$*
 
#### 1.b) Run Experiment for Superior Models
This will extract the coefficients for the models where PULSE(05) is MSE superior to Fuller(4) of the "Experiment_Multivariate_VaryingConfounding_Beta00_PULSE05.R" experiment and rerun the experiment for these models with 25000 repetitions to account for selection bias. 

1. Locate the datafile "Data/Experiment_Multivariate_VaryingConfounding_Beta00_PULSE05_REPLICATIONS_OBSERVATIONS_EXECUTIONTIME.RDS" of 1.a). 
2. Edit the data pointer in **Analysis_SelectingSuperiorModels.R** to this datafile and run the script. 
    * This script saves "Data/VaryingConfounding_MSESuperiorModelData_EXECUTIONTIME.RDS" with the extracted models. 
3. Edit the datapointer in "Experiment_Multivariate_VaryingConfounding_SuperiorModels.R" to the extracted models and run the script.

###

### 2) Data Analysis {.tabset}

All analysis on experiment data reported in the paper (https://arxiv.org/abs/2005.03353) can be found in

1. **Analysis_Multivariate_VaryingConfounding.R**
2. **Analysis_Multivariate_FixedConfounding.R**

Note that data-pointers in these scripts have to be adjusted to if used on new experiment data.

### 3) Generate Illustrations {.tabset}

All illustrations in the paper (https://arxiv.org/abs/2005.03353) is generated by the scripts:

1. **Plots_Univariate.R**
2. **Plots_Multivariate.R**

Note that data-pointers in these scripts have to be adjusted to if used on new experiment data.
